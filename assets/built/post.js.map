{"version":3,"file":"post.js","sources":["../../src/js/post/post.js"],"sourcesContent":["// Ship JS only active on post pages for better performance\r\ntwikoo.init({\r\n  envId: 'https://comment.1900.live', el: '.tk-comments', onCommentLoaded: function () {\r\n\r\n    if (document.querySelectorAll('.twikoo').length != 0) {\r\n      const cm = document.querySelectorAll('[class=tk-comment]');\r\n      const temp = document.querySelector('.discussion-avatar-list li').cloneNode(true);\r\n      document.querySelector('.discussion-avatar-list li').remove();\r\n\r\n      // forEach函数不能跳出，重写\r\n      NodeList.prototype.myForEach = function (fn) {\r\n        for (let i = 0; i < this.length; i++) {\r\n          let ret = fn(this[i], i, this);\r\n          if (typeof ret !== \"undefined\" && (ret == null || ret == false)) break;\r\n        }\r\n      }\r\n\r\n      cm.myForEach((e, i) => {\r\n        const avatarlist = document.querySelector('.discussion-avatar-list');\r\n        const av = e.getElementsByTagName('img')[0].getAttribute('src');\r\n        const ct = e.getElementsByClassName('tk-content')[0].innerText;\r\n        const li = temp.cloneNode(true);\r\n        li.getElementsByTagName('img')[0].setAttribute('src', av);\r\n        li.getElementsByTagName('img')[0].setAttribute('title', ct);\r\n        if (document.querySelectorAll(`.discussion-avatar-list img[src=\"${av}\"]`).length == 0) {\r\n          avatarlist.appendChild(li)\r\n        }\r\n        if (i == 10) {\r\n          return false;\r\n        }\r\n      });\r\n\r\n      document.querySelector('.discussion-meta-info span').innerText = document.querySelector('.discussion-meta-info span').innerText.replace('?', cm.length);\r\n    }\r\n  }\r\n})\r\n\r\nif (document.querySelectorAll('.links').length != 0) {\r\n  var el = document.querySelectorAll('.kg-bookmark-card');\r\n  el.forEach((e) => {\r\n    e.getElementsByTagName('a')[0].setAttribute('target', '_blank');\r\n    document.querySelector('.links').appendChild(e);\r\n  });\r\n}\r\n\r\n\r\n\r\n// Ajax.get('https://memos.1900.live/api/memo/all?tag=%E5%8D%9A%E5%AE%A2%E9%87%8C%E7%A8%8B%E7%A2%91',function(e){\r\n//     var date = JSON.parse(e);\r\n//     for (let index = 0; index < date.data.length; index++) {\r\n//         console.log(date.data[index].content);\r\n//     }\r\n// })\r\n\r\n// var Ajax={\r\n//   get: function(url, fn) {\r\n//     // XMLHttpRequest对象用于在后台与服务器交换数据   \r\n//     var xhr = new XMLHttpRequest();            \r\n//     xhr.open('GET', url, true);\r\n//     xhr.onreadystatechange = function() {\r\n//       // readyState == 4说明请求已完成\r\n//       if (xhr.readyState == 4 && xhr.status == 200 || xhr.status == 304) { \r\n//         // 从服务器获得数据 \r\n//         fn.call(this, xhr.responseText);  \r\n//       }\r\n//     };\r\n//     xhr.send();\r\n//   },\r\n//   // datat应为'a=a1&b=b1'这种字符串格式，在jq里如果data为对象会自动将对象转成这种字符串格式\r\n//   post: function (url, data, fn) {\r\n//     var xhr = new XMLHttpRequest();\r\n//     xhr.open(\"POST\", url, true);\r\n//     // 添加http头，发送信息至服务器时内容编码类型\r\n//     xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");  \r\n//     xhr.onreadystatechange = function() {\r\n//       if (xhr.readyState == 4 && (xhr.status == 200 || xhr.status == 304)) {\r\n//         fn.call(this, xhr.responseText);\r\n//       }\r\n//     };\r\n//     xhr.send(data);\r\n//   }\r\n// }"],"names":["twikoo","init","envId","el","onCommentLoaded","document","querySelectorAll","length","cm","temp","querySelector","cloneNode","remove","NodeList","prototype","myForEach","fn","i","this","ret","e","avatarlist","av","getElementsByTagName","getAttribute","ct","getElementsByClassName","innerText","li","setAttribute","appendChild","replace","forEach"],"mappings":"CACAA,OAAOC,KAAK,CACVC,MAAO,4BAA6BC,GAAI,eAAgBC,gBAAiB,WAEvE,GAAmD,GAA/CC,SAASC,iBAAiB,WAAWC,OAAa,CACpD,MAAMC,EAAKH,SAASC,iBAAiB,sBAC/BG,EAAOJ,SAASK,cAAc,8BAA8BC,WAAU,GAC5EN,SAASK,cAAc,8BAA8BE,SAGrDC,SAASC,UAAUC,UAAY,SAAUC,GACvC,IAAK,IAAIC,EAAI,EAAGA,EAAIC,KAAKX,OAAQU,IAAK,CACpC,IAAIE,EAAMH,EAAGE,KAAKD,GAAIA,EAAGC,MACzB,QAAmB,IAARC,IAA+B,MAAPA,GAAsB,GAAPA,GAAe,KACnE,GAGFX,EAAGO,WAAU,CAACK,EAAGH,KACf,MAAMI,EAAahB,SAASK,cAAc,2BACpCY,EAAKF,EAAEG,qBAAqB,OAAO,GAAGC,aAAa,OACnDC,EAAKL,EAAEM,uBAAuB,cAAc,GAAGC,UAC/CC,EAAKnB,EAAKE,WAAU,GAM1B,GALAiB,EAAGL,qBAAqB,OAAO,GAAGM,aAAa,MAAOP,GACtDM,EAAGL,qBAAqB,OAAO,GAAGM,aAAa,QAASJ,GAC4B,GAAhFpB,SAASC,iBAAkB,oCAAmCgB,OAAQf,QACxEc,EAAWS,YAAYF,GAEhB,IAALX,EACF,OAAO,CACT,IAGFZ,SAASK,cAAc,8BAA8BiB,UAAYtB,SAASK,cAAc,8BAA8BiB,UAAUI,QAAQ,IAAKvB,EAAGD,OAClJ,CACF,IAGgD,GAA9CF,SAASC,iBAAiB,UAAUC,SAC7BF,SAASC,iBAAiB,qBAChC0B,SAASZ,IACVA,EAAEG,qBAAqB,KAAK,GAAGM,aAAa,SAAU,UACtDxB,SAASK,cAAc,UAAUoB,YAAYV,EAAE"}